// (c) 2010 jdbartlett, MIT license
(function(a){a.fn.ImageLoupeMagnify=function(b){var c=0,d=0,e={loupe:{width:b.loupeWidth,height:b.loupeHeight},screenshot:{width:b.imageWidth,height:b.imageHeight}},f=a(this).find(".image"),g={left:f.length>0?f.offset().left:0,top:f.length>0?f.offset().top:0},h=a(".loupe").css({"background-image":"url("+f.find("img").attr("data-full")+")"});f.mousemove(function(a){c=a.pageX-g.left;d=a.pageY-g.top;if(h.is(":not(:animated):hidden")){f.trigger("mouseenter")}if(c<0||d<0||c>e.screenshot.width||d>e.screenshot.height){if(!h.is(":animated")){f.trigger("mouseleave")}return false}h.css({left:c-e.loupe.width/2,top:d-e.loupe.height/2,backgroundPosition:"-"+b.horizontalFactor*c+"px -"+b.verticalFactor*d+"px"})}).mouseleave(function(){h.stop(true,true).fadeOut("fast")}).mouseenter(function(){h.stop(true,true).fadeIn("fast")})}})(jQuery)

jQuery('#screenshot').ImageLoupeMagnify({
	loupeWidth: 150,		// Loupe width
	loupeHeight: 150,		// Loupe height
	imageWidth:620,			// Image's width
	imageHeight:390,		// Image's height
	horizontalFactor: 1.65,	// Horizontal bg position factor
	verticalFactor: 1.65	// Vertical bg position factor
});